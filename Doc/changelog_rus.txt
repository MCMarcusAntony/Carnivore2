Changelog for Carnifore2 MultiFunctional Cartridge
Copyright (c) 2017-2020 by RBSC
Русская версия
--------------------------------------------------

15.03.2020 (необходимые обновления: прошивка FGPA, стартовое меню, все утилиты, DefConfig конфигурация;
           также необходим возврат оригинальной конфигурации, если вы делали "Power-up fix")

1. Добавлен новый экран настройки — конфигурация слотов. Его можно вызвать с помощью горячей клавиши "O" или
   "Enter". Новый экран настройки позволяет запускать двухслотовую конфигурацию с гибкой настройкой основного
   (физического) слота - вы можете выбрать, какие встроенные устройства Carnivore2 включить. Вы можете выбрать
   2 игры одновременно. Единственным ограничением для дополнительного (эмулируемого) слота является то, что он
   может запускать только игры с мапперами Konami4 и Konami5, а также небольшие игры до 32 Кб без маппера.
   Дополнительный (эмулируемый) слот становится доступным, если в MSX есть как минимум один неиспользуемый
   физический слот, и если он не занят другим устройством

2. Пользовательский интерфейс главной страницы загрузочного меню был изменён, чтобы все основные горячие клавиши
   были легко видны на экране. Также в загрузочном меню теперь есть выбор игр для физического и эмулируемого слотов
   под названием "Dual-Slot". Игру для физического слота можно выбрать нажатием "1", игру для эмулируемого слота
   можно выбрать нажатием "2". Клавиша "D" отменяет выбор игр для слотов, а также для автозапуска

3. Параметры записи DefConfig и загрузочное меню были изменены таким образом, чтобы при запуске этой конфигурации
   загрузочное меню оставалось в основном слоте и позволяло бы C2MAN и другим утилитам без проблем обнаруживать
   картридж. Утилиты C2MAN и C2MAN40 теперь заносят скорректированную запись DefConfig в каталог при оптимизации
   директории, которую можно запустить из сервисного меню

4. В экран конфигурации добавлен новый параметр для установки желаемой частоты кадров при запуске компьютера.
   Настройка сохраняется в конфигурационнои ПЗУ. Выбор возможен между 50 Гц, 60 Гц и частотой по-умолчанию для
   компьютера (частота по-умолчанию показывается как "--"). Теперь кнопка «F» в загрузочном меню только временно
   переключает частоту между 50 Гц и 60 Гц

5. Экран конфигурации получил ещё одну новую настройку — "Dual-reset on cold boot" - двойной сброс при "холодном"
   старте. Это позволяет компьютеру дважды перезагружаться после холодного старта. Это необходимо для полной
   инициализации картриджа при включении компьютера. Поэтому рекомендуется включить функцию двойного сброса в
   настройках картриджа

6. Утилита C2CFGBCK больше не выполняет теневое копирование ПЗУ в память и поэтому запускается быстрее

7. Раздел данных загрузочного меню был сильно оптимизирован, чтобы в нем появилось больше свободного места.
   Повторяющиеся символы теперь выводятся с помощью макросов (это экономит место). Данные для экранов загрузочного
   меню теперь записываются в последние два блока по 8 Кб первого блока FlashROM. Это экономит много места для
   кода программы

8. Прошивка FPGA теперь сообщает свою внутреннюю версию в регистрах конфигурации (3 байта) в формате ASCII (только
   начиная с версии 2.30)

9. Теперь картридж выводит текущие версии загрузочного меню и прошивки FPGA во время холодного старта, а затем либо
   перезагружает систему (двойной сброс), либо переходит в загрузочное меню

10. Картридж не будет работать в слотах 0 и 3. При обнаружении себя в этих слотах картридж выводит сообщение и
    блокирует систему

11. ПЗУ дисковода было заменено на более новую версию - Nextor 2.1.0 Beta 2. Это стабильная версия с множеством
    исправлений и новыми функциями. ПЗУ предоставлено разработчиком Konamiman

12. Экран конфигурации получил ещё один новую настройку — "Отключить стерео FMPAC". Эта настройка переводит FMPAC
    в режим моно для аудио разъёма Carnivore2

13. Загрузочное меню теперь обнаруживает, что оно работает на корейских или арабских MSX, и в случае, если оно не
    совместимо с этими системами, выводится специальное сообщение и через 10 секунд выполняется попытка загрузить
    MSX-DOS. В этом случае в картридж должно быть установлено совместимое с арабскими и корейскими компьютерами
    загрузочное меню (BOOTCMFC.BIN). Специальная версия загрузочного меню находится в папке 'Special" в нашем
    репозитории

14. Теперь игру в экране "Dual-Slot" можно выбрать с помощью клавиши "Пробел". Нажатие пробела позволит циклически
    перебирать совместимые игры для каждого слота. После полного цикла будет выбран вариант "пусто" (empty), чтобы
    оставить слот свободным. Кроме того, главный слот также может использовать конфигурацию "Konami SCC+". Таким
    образом, вы можете запускать игры с поддержкой SCC+ во втором слоте и наслаждаться одновременно и SCC+, и игрой
    на одном картридже. При включённом расширении первого слота можно включать и выключать различные модули (FMPAC,
    IDE, RAM) нажатием клавиши "Пробел"

15. Обратный отсчёт автозапуска можно пропустить клавишей "Пробел". Это же относится и к сообщению о несовместимом
    загрузочном меню

16. Все экраны настроек теперь поддерживают работу с джойстиком. Перемещение рукоятки интерпретируется как нажатие
    клавиш курсора, а нажатие кнопок равносильно нажатию клавиш "Пробел" или "ESC". В файле "readme.txt" можно
    найти более подробную информацию

17. В настройках PSG/PPI кликера теперь "Пробел" включает и выключает PSG, а "Enter" включает или выключает PPI
    кликер. Это сделано для совместимости с поддержкой джойстика в этом экране

18. В течении обратного отсчёта при автостарте кнопки джойстика позволяют или пропустить автостарт и сразу запустить
    выбранный ROM (или запись конфигурации) или отменить автостарт и выйти в главное менюю В файле "readme.txt"
    можно найти более подробную информацию

19. Загрузочное меню ищет сетевые модули КУВТ и КУВТ2 и блокирует загрузку если эти модули найдены


31.03.2019

1. В загрузочное меню добавлен экран для настройки интерфейса, который вызывается кнопкой "S". Пользователь может
   включить или отключить сортировку записей в меню, включить/отключить плавные переходы цветов между
   экранами интерфейса, регулировать скорость обработки клавиатуры и джойстика, а также настраивать
   цвета шрифта и фона во всех экранах загрузочного меню (на MSX2 и более поздних компьютерах). Пользователь
   также может восстановить оригинальные настройки нажав всего одну клавишу. Настройки сохраняюся в
   конфигурационном ППЗУ

2. Клавиша F3 при старте загрузочное меню позволяет загрузить оригинальные настройки интерфейса, но не стирает эти
   настройки в конфигурационном ППЗУ. Эта опция может использоваться если настройки, установленные пользователем
   не позволяют нормально работать с загрузочным меню

3. Утилиты C2MAN, C2MAN40, C2RAMLDR, C2SRAM и C2BACKUP автоматически добавляют расширение для имён файлов данных
   или ROM файла если пользователь не указал его при вводе имени файла

4. Утилиты C2MAN, C2MAN40 и C2RAMLDR теперь корректно находят удалённые записи директории для их дальнейшего
   использования. Также поправлена оптимизация директории

5. Утилиты C2MAN и C2MAN40 были оптимизированы, чтобы сократить их размер. Теперь они свободно помещаются в
   ОЗУ загруженной MSX-DOS2

6. Новая утилита C2CFGBCK позволяет сохранять и восстанавливать данные из конфигурационного EEPROM чипа

7. Утилита C2BACKUP спрашивает пользователя сохранить ли текущий бут блок или нет. Если пользователь отвечает
   положительно, то текущий бут блок в картридже не перезаписывается на тот, который сохранён в файле бэкапа

8. Добавлена утилита C2IDETST для тестирования IDE контроллера. Утилита выполняет в цикле 16384 операций
   чтения/записи и выдаёт результат операции как passed/failed. В конце теста утилита выдаёт статистику
   выполнения теста


30.09.2018

1. Встроенные кнопки джойстика на компьютерах Casio's теперь позволяют отменить автостарт


22.09.2018

1. Интерфейс загрузочного меню теперь поддерживает управление джойпадами или джойстиками, подключёнными к любому из
   двух джойстик-портов. Джойстик позволяет управлять курсором в основном меню, запускать игры и
   конфигурационные записи, а также может отменять автостарт выбранной записи

2. В загрузочное меню добавлен второй экран помощи с описанием управления джойстиком. Также сообщение, которое
   выводится при автостарте теперь указывает на возможность его отмены джойстиком


14.06.2018 (необходимо обновление прошивки)

1. Эмуляция PSG была значительно улучшена, теперь звучание очень близко к тому, что выдаёт оригинальный чип

2. Все утилиты теперь корректно работают под MSX-DOS версии 1.xx; утилита C2MAN_40.COM переименована
   в C2MAN40.COM для совместимости со старыми версиями DOS

3. Утилиты C2MAN и C2MAN40 теперь компилируются из одного исходника, детектирование VDP и типа MSX
   позволяет устанавливать оптимальный режим экрана; улучшен интерфейс, оптимизирован код

4. В поддиректории \Util\special находятся специальные версии утилит C2MAN и C2MAN40, редакторы
   которых работают на корейских и арабских MSX без сдвига экрана вверх

5. Утилита C2BACKUP записывает данные во FlashROM на 35% быстрее; поправлена ошибка со счётчиком

6. Поправлены фильтры SCC и PSG, качество звучания значительно улучшилось

7. В прошивку Альтеры добавлена функция аппаратного перехвата старта ROM, но она пока не используется
   в загрузочном меню

8. Утилиты C2BACKUP и C2SRAM поддерживают опцию /r - рестарт системы после завершения операции


10.05.2018

1. Утилиты и загрузочное меню теперь работают на Daewoo, а также на арабских MSX

2. Добавлена новая утилита - C2BACKUP: она позволяет считывать и записывать полный образ FlashROM чипа


06.05.2018

1. Исправлен баг при выводе помощи у всех утилит

2. В утилиты C2MAN и C2MAN_40 добавлена функция рестарта системы (в основном меню)


29.04.2018 (рекомендуется обновление прошивки)

1. Добавлено переключение Z80/R800 режимов для Turbo-R компьютеров клавишей 'T'

2. Добавлено переключение в Turbo режим на компьютерах Panasonic MSX2+ клавишей 'T'

3. Добавлена индикация Z80/Turbo/R800 режима в статусную строку

4. Частота тактирования CF карты теперь не зависит от частоты процессора, так что IDE будет корректно
   работать на частотах выше стандартной. Также были исправлены несколько несущественных ошибок в прошивке

5. Частота VDP, выбранная в загрузочном меню и/или режим Turbo/R800 восстанавливается для ROM'a после ресета

6. В документации поправлено описание регистра PosSiz, а также описана работа режимов Turbo/R800

7. Если найден RCP файл, совпадающий по имени с загружаемым ROM файлом, то утилиты C2MAN, C2MAN40 и
   C2RAMLDR спрашивают надо ли загружать данные из RCP файла. В автоматическом режиме данные из RCP
   файла будут загружены автоматически

8. Утилита C2RAMLDR может перезагрузить компьютер по желанию пользователя или автоматически после записи
   ROM файла в ОЗУ если в командной строке присутствует ключ /r ; добавлена функция рестарта в меню

9. После записи IDE и FMPAC БИОСов в картридж больше нет проблем в работе с директорией. Раньше вместо
   директории выводился мусор из-за неправильной конфигурации картрижда после записи БИОСов

10. Добавлено несколько RCP файлов


03.02.2018

1. Поправлена ошибка в запросе на удаление записи директории в утилитах C2MAN и C2MAN_40

2. Добавлены несколько RCP файлов


03.01.2018

1. Поправлена ошибка в конфигурации Konami 4 маппера


30.12.2017

1. Утилиты C2MAN, C2MAN_40, C2RAMLDR и C2SRAM принимают команды независимо от регистра клавиатуры


26.12.2017

1. Немного улучшенны шрифт и индикаторы громкости в загрузочном меню

2. Улучшенные пресеты DSK2ROM и LIFEMARS


16.12.2017

1. Поправлена ошибка в утилитах C2MAN, C2MAN_40 и C2RAMLDR - если в одном регистре выставлятся флаг
   перезагрузки, то в другом регистре этот флаг раньше не выставлялся, что приводило к конфликту

2. Улучшен ширифт для бут блока, несколько символов изменены, добавлены горизонтальные линии под названиями
   экранов


05.12.2017 (необходимо обновление прошивки)

1. Исправлена ошибка в утилитах C2MAN, C2MAN_40 and C2RAMLDR. Теперь файлы со всеми возможными атрибутами
   открываются и читаются корректно

2. В прошивку добавлена возможность включения и выключения внутренней эмуляции устройств PSG и PPI Clicker,
   а также возможность раздельной регулировки их громкости

3. В бут блок добавлен экран с возможностью раздельного включения/выключения эмуляции PSG и PPI Clicker, а
   также регуляторы громкости для обоих устройств

4. Загрузочное меню теперь также доступно в красной цветовой гамме


16.11.2017

1. Если включён режим автостарта для любой записи в директории, то выводится сообщение и ожидается нажатие
   клавиш в течение 3 секунд. Если нажаты ESC, TAB или F4, то автозапуска не происходит и выводится 
   основное меню

2. Теперь активировать выбранную запись можно также клавишей Enter

3. Более не нужно нажимать Shift для управления функциями в бут блоке. Воспринимаются все символы, независимо
   от их регистра

4. Экран помощи был обновлён (изменён список клавиш), также показывается текущая версия бут блока - спасибо
   8bits4ever за идею!

5. Пофиксен баг: конфигурационные записи больше нельзя активировать клавишей G или g

6. Пофиксен баг: утилита C2RAMLDR выводила не то сообщение об ошибке если происходил сбой при загрузке файла
   в ОЗУ картриджа

7. Утилита C2RAMLDR больше не использует "R" в поле маппера для записей "RAM: name", теперь туда копируется
   детектированный или указанный вручную тип маппера

8. Утилита C2RAMLDR теперь позволяет не создавать запись в директории для загружаемого файла при использовании
   опции /D ; также можно отказаться от создания директории в интерактивном режиме

9. Добавлена утилита C2SRAM, которая позволяет записывать и считывать 8кб эмулируемого SRAM для FMPAC


04.11.2017

1. Полностью убран курсор (спасибо Grauw и Nyyrikki), символы мапперов сделаны покрасивее, чуть поменялись 
   скрины помощи и установки громкости (добавлена строка внизу экрана)

2. Добавлена установка 40 символьного режима для утилиты C2MAN_40. Для утилиты C2MAN добавлено детектирование
   VDP и вывод сообщения о несовместимости с 40 символьным режимом если командная строка пуста


03.11.2017

1. Поправлен шрифт, чтобы нижняя полоса не сливалась со статусной строкой. Добавлен значок копирайта в шрифт.
   Добавлены другие дополнительные символы, например символы клавиш H и V, а также изменён курсор

2. Цвета и палитры меню, экрана помощи и установки громкости выведены отдельными переменными и теперь можно
   легко компилировать бут блок с любой цветовой гаммой

3. Сделана попытка убрать курсор. Также убран звук кликания клавиш

4. Добавлены цвета в экранах MSX1, подобные тем, что выводятся на MSX2


22.10.2017

1. Поправлена схема. Номера транзисторов Т3-Т6 были указаны неправильно.


02.10.2017

1. Добавлена возможность переключения частоты VDP 50/60 Гц с помощью клавиши 'F' в основном меню.
   Значение сохраняется в ППЗУ

2. Внизу экрана выводится строка с информацией о текущей частоте VDP, громкости FMPAC и SCC, а также информация
   о страницах (текущая/всего)


13.09.2017 (необходимо обновление прошивки)

1. Добавлен функционал сохранения значения громкости FMPAC и SCC в ППЗУ на плате картриджа


02.09.2017 (необходимо обновление прошивки)

1. Улучшен вывод на DAC, FMPAC играет громче и чище

2. Добавлена возможность регулировать громкость FMPAC и SCC раздельно из загрузочного меню

   Управляющий громкостью регист расположен по адресу 0x4FA2. Старшие 2 бита не используются. Биты 3,4,5
   отвечают за громкость FMPAC, биты 0,1,2 отвечают за громкость SCC/SCC+

3. Добавлена поддержка SCC+

4. Поправлен баг с видеоэффектами на MSX1. Палитровые эффекты на видеопроцессорах v9928 (и ранних) деактивируются


10.02.2017 (необходимо обновление прошивки)

1. В запись директории добавлен регистр конфигурации расширений слота. Теперь если записывать неправильное значение
   типа 0xxx1111 (0Fh), то старое значение регистра менятся не будет

2. Теперь все регистры конфигурации картриджа читаются своими значениями по месту прописки (4F80-4FA1). Это сделано
   преимущественно для удобства отладки в дебагере. Можно запретить чтение этих регистров установив в главном
   управляющем регистре CardMDR (4F80) значение нулевого бита в единицу xxxxxxx1. В таком случае на этом участке
   памяти будет читаться то что задано другими параметрами (обычно страница ROM)


03.02.2017 (необходимо обновление прошивки)

1. Добавлена работа расширенного слота. Подробности смотрите в файле документации
